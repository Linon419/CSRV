# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–

```bash
cd react-src
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

#### æœ¬åœ°ç‰ˆæœ¬
```bash
npm run dev:local
```
ç„¶åè®¿é—® http://localhost:5173

#### Cloudflareç‰ˆæœ¬
```bash
npm run dev:cloudflare
```
ç„¶åè®¿é—® http://localhost:5173

### 3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

#### æœ¬åœ°ç‰ˆæœ¬
```bash
npm run build:local
```
æ„å»ºè¾“å‡ºåˆ° `../dist-local/`

ç›´æ¥æ‰“å¼€ `dist-local/index.html` å³å¯ä½¿ç”¨ï¼ˆæ— éœ€æœåŠ¡å™¨ï¼‰

#### Cloudflareç‰ˆæœ¬
```bash
npm run build:cloudflare
```
æ„å»ºè¾“å‡ºåˆ° `../public-react/`

å°†å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®çš„ `public/` æ–‡ä»¶å¤¹ï¼Œç„¶åæŒ‰ç…§åŸæœ‰Cloudflareéƒ¨ç½²æµç¨‹éƒ¨ç½²ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

```
react-src/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ App.jsx              # ä¸»åº”ç”¨ç»„ä»¶ï¼ˆé€šç”¨ï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ indicators.js        # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ backtest.js          # å›æµ‹é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ local/               # æœ¬åœ°ç‰ˆæ•°æ®æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ indexedDB.js     # IndexedDBæ“ä½œ
â”‚   â”‚   â”‚   â””â”€â”€ binanceAPI.js    # å¸å®‰APIè°ƒç”¨
â”‚   â”‚   â””â”€â”€ cloudflare/          # Cloudflareç‰ˆæ•°æ®æœåŠ¡
â”‚   â”‚       â””â”€â”€ api.js           # Workers APIè°ƒç”¨
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ global.css           # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â””â”€â”€ main.jsx             # æœ¬åœ°ç‰ˆå…¥å£
â”‚   â””â”€â”€ cloudflare/
â”‚       â””â”€â”€ main.jsx             # Cloudflareç‰ˆå…¥å£
â”œâ”€â”€ index-local.html             # æœ¬åœ°ç‰ˆHTML
â”œâ”€â”€ index-cloudflare.html        # Cloudflareç‰ˆHTML
â”œâ”€â”€ vite.config.local.js         # æœ¬åœ°ç‰ˆé…ç½®
â””â”€â”€ vite.config.cloudflare.js   # Cloudflareç‰ˆé…ç½®
```

## ğŸ¯ æ ¸å¿ƒè®¾è®¡æ€æƒ³

### æ•°æ®å±‚éš”ç¦»

é€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆpropsï¼‰ä¼ é€’ä¸åŒçš„æ•°æ®æœåŠ¡å®ç°ï¼š

```jsx
// æœ¬åœ°ç‰ˆ
<App dataService={localDataService} version="local" />

// Cloudflareç‰ˆ
<App dataService={cloudflareDataService} version="cloudflare" />
```

### å…±äº«ç»„ä»¶

`App.jsx` æ˜¯ä¸¤ä¸ªç‰ˆæœ¬å…±ç”¨çš„ï¼Œé€šè¿‡ `dataService` propæ¥æ”¶ä¸åŒçš„æ•°æ®æœåŠ¡å®ç°ï¼š

- æœ¬åœ°ç‰ˆï¼šä½¿ç”¨ IndexedDB + ç›´æ¥è°ƒç”¨å¸å®‰API
- Cloudflareç‰ˆï¼šä½¿ç”¨ Workers API è°ƒç”¨

### åŠŸèƒ½å®Œå…¨ä¸€è‡´

ä¸¤ä¸ªç‰ˆæœ¬çš„UIå’ŒåŠŸèƒ½é€»è¾‘å®Œå…¨ç›¸åŒï¼Œåªæ˜¯æ•°æ®å­˜å‚¨æ–¹å¼ä¸åŒï¼š
- âœ… Kçº¿å›¾è¡¨å±•ç¤º
- âœ… æŠ€æœ¯æŒ‡æ ‡ï¼ˆMAã€EMAã€å¸ƒæ—å¸¦ï¼‰
- âœ… å›æµ‹å·¥å…·
- âœ… å†å²è®°å½•ç®¡ç†
- âœ… æ•°æ®ç¼“å­˜

## ğŸ”§ å¼€å‘å»ºè®®

### æ·»åŠ æ–°åŠŸèƒ½

åœ¨ `App.jsx` ä¸­æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œç¡®ä¿ä½¿ç”¨ `dataService` æ¥å£ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ç‰¹å®šçš„æ•°æ®æœåŠ¡ã€‚

### ä¿®æ”¹æ ·å¼

ä¿®æ”¹ `src/styles/global.css` å³å¯åŒæ—¶å½±å“ä¸¤ä¸ªç‰ˆæœ¬ã€‚

### æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `React.memo()` ä¼˜åŒ–å­ç»„ä»¶
- ä½¿ç”¨ `useMemo()` ç¼“å­˜è®¡ç®—ç»“æœ
- ä½¿ç”¨ `useCallback()` ç¼“å­˜å›è°ƒå‡½æ•°

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | æœ¬åœ°ç‰ˆ | Cloudflareç‰ˆ | è¯´æ˜ |
|------|--------|--------------|------|
| Kçº¿å›¾è¡¨ | âœ… | âœ… | LightweightCharts |
| æŠ€æœ¯æŒ‡æ ‡ | âœ… | âœ… | MAã€EMAã€å¸ƒæ—å¸¦ |
| å›æµ‹å·¥å…· | âœ… | âœ… | æ‰‹åŠ¨å¼€å¹³ä»“ |
| æ•°æ®ç¼“å­˜ | IndexedDB | D1 Database | ä¸åŒå­˜å‚¨ |
| APIè°ƒç”¨ | ç›´æ¥ | Workersä»£ç† | ä¸åŒæ–¹å¼ |
| éƒ¨ç½²æ–¹å¼ | æœ¬åœ°æ–‡ä»¶ | Cloudflare | ä¸åŒå¹³å° |
| éœ€è¦æœåŠ¡å™¨ | âŒ | âœ… | å…³é”®åŒºåˆ« |

## ğŸ› å¸¸è§é—®é¢˜

### Q: æœ¬åœ°ç‰ˆæ— æ³•åŠ è½½æ•°æ®ï¼Ÿ
A: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼Œç¡®è®¤IndexedDBæ˜¯å¦æˆåŠŸåˆå§‹åŒ–ï¼Œä»¥åŠå¸å®‰APIæ˜¯å¦å¯è®¿é—®ã€‚

### Q: Cloudflareç‰ˆæ— æ³•è¿æ¥APIï¼Ÿ
A: ç¡®ä¿Cloudflare Workers Functionså·²æ­£ç¡®é…ç½®ï¼Œæ£€æŸ¥ `/api/klines` ç­‰ç«¯ç‚¹æ˜¯å¦å¯è®¿é—®ã€‚

### Q: æ„å»ºåæ ·å¼ä¸¢å¤±ï¼Ÿ
A: ç¡®è®¤ `global.css` å·²æ­£ç¡®å¯¼å…¥åˆ° `App.jsx` ä¸­ã€‚

### Q: å›¾è¡¨æ— æ³•æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥ LightweightCharts æ˜¯å¦æ­£ç¡®åŠ è½½ï¼Œä»¥åŠå›¾è¡¨å®¹å™¨çš„refæ˜¯å¦æ­£ç¡®ç»‘å®šã€‚

## ğŸ“– ä¸‹ä¸€æ­¥

1. æ ¹æ®éœ€è¦ä¼˜åŒ–ç»„ä»¶ç»“æ„ï¼ˆæ‹†åˆ†æ›´å°çš„å­ç»„ä»¶ï¼‰
2. æ·»åŠ TypeScriptæ”¯æŒæé«˜ç±»å‹å®‰å…¨
3. æ·»åŠ å•å…ƒæµ‹è¯•
4. ä¼˜åŒ–ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€
5. æ·»åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡

## ğŸ”— ç›¸å…³èµ„æº

- [Reactæ–‡æ¡£](https://react.dev/)
- [Viteæ–‡æ¡£](https://vitejs.dev/)
- [LightweightChartsæ–‡æ¡£](https://tradingview.github.io/lightweight-charts/)
- [Cloudflare Pagesæ–‡æ¡£](https://developers.cloudflare.com/pages/)

## ğŸ’¡ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼
